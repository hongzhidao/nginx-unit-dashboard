(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ed1a3af"],{"480c":function(e,t,l){},"53ca":function(e,t,l){"use strict";l.d(t,"a",(function(){return o}));l("a4d3"),l("e01a"),l("d28b"),l("d3b7"),l("3ca3"),l("ddb0");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}},"61ec":function(e,t,l){"use strict";var o=l("480c"),a=l.n(o);a.a},e705:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("div",{staticClass:"filter-container"},[l("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"10px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("Add")]),l("el-select",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{clearable:"","default-first-option":"",placeholder:"Select group"},on:{change:e.selectGroup,clear:function(t){return e.removeGroup()}},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.groups,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1),l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-delete"},on:{click:e.handleClear}},[e._v("Clear routes")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),l("el-table-column",{attrs:{label:"Match"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.host.length?l("span",{staticClass:"match-item"},[l("em",{staticClass:"match-name"},[e._v("Host:")]),e._l(t.row.host,(function(t,o){return l("em",{key:o},[e._v(" "+e._s(t)+" ")])}))],2):e._e(),t.row.uri.length?l("span",{staticClass:"match-item"},[l("em",{staticClass:"match-name"},[e._v("URI:")]),e._l(t.row.uri,(function(t,o){return l("em",{key:o},[e._v(" "+e._s(t)+" ")])}))],2):e._e(),t.row.method.length?l("span",{staticClass:"match-item"},[l("em",{staticClass:"match-name"},[e._v("Method:")]),e._l(t.row.method,(function(t,o){return l("em",{key:o},[e._v(" "+e._s(t)+" ")])}))],2):e._e()]}}])}),l("el-table-column",{attrs:{label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.pass?l("span",[l("em",{staticClass:"match-name"},[e._v("Pass:")]),e._v(" "+e._s(t.row.pass)+" ")]):t.row.share?l("span",[l("em",{staticClass:"match-name"},[e._v("Share:")]),e._v(" "+e._s(t.row.share)+" ")]):t.row.code?l("span",[l("em",{staticClass:"match-name"},[e._v("Return:")]),e._v(" "+e._s(t.row.code)+" "+e._s(t.row.location)+" ")]):t.row.proxy?l("span",[l("em",{staticClass:"match-name"},[e._v("Proxy:")]),e._v(" "+e._s(t.row.proxy)+" ")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"Operation",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate(o)}}},[e._v("Update")]),"deleted"!=o.status?l("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.handleDelete(o,e.group)}}},[e._v("Delete")]):e._e()]}}])})],1),l("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"form",staticStyle:{width:"400px margin-left:50px"},attrs:{rules:e.rules,"show-message":!1,model:e.model,"label-position":"right","label-width":"100px"}},[l("el-form-item",{attrs:{label:"Group",prop:"group"}},[l("el-select",{staticStyle:{width:"150px"},attrs:{filterable:"",disabled:e.disabledGroup,"allow-create":"","default-first-option":"",placeholder:"Select"},on:{change:e.selectGroup},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.groups,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),l("el-form-item",{attrs:{label:"Method",prop:"method"}},[l("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"","allow-create":"","default-first-option":"",placeholder:"Select"},model:{value:e.model.method,callback:function(t){e.$set(e.model,"method",t)},expression:"model.method"}},e._l(e.methods,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"Scheme",prop:"scheme"}},[l("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"Select"},model:{value:e.model.scheme,callback:function(t){e.$set(e.model,"scheme",t)},expression:"model.scheme"}},e._l(e.schemes,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"Host",prop:"host"}},[l("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:e.model.host,callback:function(t){e.$set(e.model,"host",t)},expression:"model.host"}})],1),l("el-form-item",{attrs:{label:"Source",prop:"src"}},[l("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:e.model.src,callback:function(t){e.$set(e.model,"src",t)},expression:"model.src"}})],1),l("el-form-item",{attrs:{label:"Destination",prop:"dst"}},[l("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:e.model.dst,callback:function(t){e.$set(e.model,"dst",t)},expression:"model.dst"}})],1),l("el-form-item",{attrs:{label:"URI",prop:"uri"}},[l("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:e.model.uri,callback:function(t){e.$set(e.model,"uri",t)},expression:"model.uri"}})],1),l("el-form-item",{attrs:{label:"Arguments"}},[l("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addArgument()}}},[e._v("Add argument")])],1),e._l(e.model.args,(function(t,o){return l("el-form-item",{key:"args_"+o,attrs:{inline:!0}},[l("el-row",{attrs:{gutter:10}},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{rules:[{required:!0}],prop:"args."+o+".name"}},[l("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Name"},model:{value:t.name,callback:function(l){e.$set(t,"name",l)},expression:"arg.name"}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{rules:[{required:!0}],prop:"args."+o+".value"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"arg.value"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeArgument(o)}}},[e._v("Delete")])],1)],1)],1)})),l("el-form-item",{attrs:{label:"Headers"}},[l("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addHeader()}}},[e._v("Add header")])],1),e._l(e.model.headers,(function(t,o){return l("el-form-item",{key:"headers_"+o,attrs:{inline:!0}},[l("el-row",{attrs:{gutter:10}},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{rules:[{required:!0}],prop:"headers."+o+".name"}},[l("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Name"},model:{value:t.name,callback:function(l){e.$set(t,"name",l)},expression:"header.name"}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{rules:[{required:!0}],prop:"headers."+o+".value"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"header.value"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeHeader(o)}}},[e._v("Delete")])],1)],1)],1)})),l("el-form-item",{attrs:{label:"Cookies"}},[l("el-button",{attrs:{type:"success"},on:{click:function(t){return e.addCookie()}}},[e._v("Add cookie")])],1),e._l(e.model.cookies,(function(t,o){return l("el-form-item",{key:"cookies_"+o,attrs:{inline:!0}},[l("el-row",{attrs:{gutter:10}},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{rules:[{required:!0}],prop:"cookies."+o+".name"}},[l("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Name"},model:{value:t.name,callback:function(l){e.$set(t,"name",l)},expression:"cookie.name"}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{rules:[{required:!0}],prop:"cookies."+o+".value"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter values"},model:{value:t.value,callback:function(l){e.$set(t,"value",l)},expression:"cookie.value"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeCookie(o)}}},[e._v("Delete")])],1)],1)],1)})),l("el-form-item",{attrs:{label:"Action"}},[l("el-radio-group",{model:{value:e.model.action_type,callback:function(t){e.$set(e.model,"action_type",t)},expression:"model.action_type"}},[l("el-radio-button",{attrs:{label:"pass"}},[e._v("Pass")]),l("el-radio-button",{attrs:{label:"share"}},[e._v("Share")]),l("el-radio-button",{attrs:{label:"proxy"}},[e._v("Proxy")]),l("el-radio-button",{attrs:{label:"return"}},[e._v("Return")])],1)],1),"pass"==e.model.action_type?l("el-form-item",[l("el-select",{attrs:{placeholder:"Select","allow-create":"",filterable:""},model:{value:e.model.pass,callback:function(t){e.$set(e.model,"pass",t)},expression:"model.pass"}},e._l(e.passes,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"share"==e.model.action_type?l("el-form-item",[l("el-input",{staticStyle:{width:"300px"},model:{value:e.model.share,callback:function(t){e.$set(e.model,"share",t)},expression:"model.share"}})],1):e._e(),"proxy"==e.model.action_type?l("el-form-item",[l("el-input",{staticStyle:{width:"300px"},model:{value:e.model.proxy,callback:function(t){e.$set(e.model,"proxy",t)},expression:"model.proxy"}})],1):e._e(),"return"==e.model.action_type?l("el-form-item",[l("el-col",{attrs:{span:5}},[l("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{prop:"code"}},[l("el-input",{attrs:{placeholder:"Status"},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{prop:"location"}},[l("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Location"},model:{value:e.model.location,callback:function(t){e.$set(e.model,"location",t)},expression:"model.location"}})],1)],1)],1):e._e()],2),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("Cancel")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDataForm()}}},[e._v("Submit")])],1)],1)],1)},a=[],s=(l("4de4"),l("caad"),l("b64b"),l("ac1f"),l("2532"),l("466d"),l("53ca")),r={args:[],headers:[],cookies:[],action_type:"pass"};function i(e){for(var t,l,o,a=[],r=0;r<e.length;r++){var i,n=e[r],c=n.match,u=n.action,d=[],p=[],m=[],f=[],h=[],b=[],v=[],g=[];if(c){var y=c.method,_=c.scheme,k=c.host,x=c.source,w=c.destination,S=c.uri,$=c.arguments,C=c.headers,A=c.cookies;if(y&&(d="object"===Object(s["a"])(y)?y:[y]),k&&(p="object"===Object(s["a"])(k)?k:[k]),x&&(m="object"===Object(s["a"])(x)?x:[x]),w&&(f="object"===Object(s["a"])(w)?w:[w]),S&&(h="object"===Object(s["a"])(S)?S:[S]),$)for(t in $)l=$[t],o="string"===typeof l?[l]:l,b.push({name:t,value:o});if(C)for(t in C)l=C[t],o="string"===typeof l?[l]:l,v.push({name:t,value:o});if(A)for(t in A)l=A[t],o="string"===typeof l?[l]:l,g.push({name:t,value:o})}i=u.pass?"pass":u.share?"share":u.proxy?"proxy":"return",a.push({index:r,method:d,scheme:_,host:p,src:m,dst:f,uri:h,args:b,headers:v,cookies:v,action_type:i,pass:u.pass,share:u.share,proxy:u.proxy,code:u.return,location:u.location})}return a}var n={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{methods:[{value:"GET",label:"GET"},{value:"PUT",label:"PUT"},{value:"POST",label:"POST"}],schemes:[{value:"http",label:"http"},{value:"https",label:"https"}],list:null,group:null,groups:null,routes:null,passes:null,latest:null,listLoading:!1,model:Object.assign({},r),dialogFormVisible:!1,dialogStatus:"",textMap:{create:"Add route",update:"Update route"},rules:{}}},computed:{disabledGroup:function(){return"update"===this.dialogStatus||Array.isArray(this.routes)}},created:function(){this.fetchData()},methods:{fetchData:function(){var e,t=this.$store.getters.routes,l=this.$store.getters.passes;this.routes=t,this.passes=l,this.routes&&(Array.isArray(this.routes)?e=this.routes:(this.groups=Object.keys(this.routes),this.groups.length>0&&(this.group||(this.group=this.groups[0]),e=this.routes[this.group],this.latest=this.group))),this.list=e?i(e):null},resetFormModel:function(){this.model=Object.assign({},r)},submitDataForm:function(){var e=this;this.$refs.form.validate((function(t){if(t){if(e.routes&&(Array.isArray(e.routes)&&e.group||!Array.isArray(e.routes)&&!e.group))return;e.$store.dispatch("conf/saveRoute",{data:e.model,routes:e.routes,group:e.group,list:e.list}).then((function(t){e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:"Done",message:t,type:"success",duration:2e3})}))}}))},handleCreate:function(){var e=this;this.resetFormModel(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs.form.clearValidate()}))},handleUpdate:function(e){var t=this;this.model=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs.form.clearValidate()}))},handleDelete:function(e,t){var l=this;this.$confirm("Are you sure?",{confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(){l.$store.dispatch("conf/removeRoute",{index:e.index,group:t}).then((function(e){l.fetchData(),l.$notify({title:"Success",message:e,type:"success",duration:2e3})}))})).catch((function(){}))},handleClear:function(){var e=this;this.$confirm("Are you sure?",{confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(){e.$store.dispatch("conf/clearRoutes").then((function(t){e.group=null,e.fetchData(),e.$notify({title:"Success",message:t,type:"success",duration:2e3})}))})).catch((function(){}))},addArgument:function(){this.model.args.push({})},removeArgument:function(e){this.model.args=this.model.args.filter((function(t,l){return l!==e}))},addHeader:function(){this.model.headers.push({})},removeHeader:function(e){this.model.headers=this.model.headers.filter((function(t,l){return l!==e}))},addCookie:function(){this.model.cookies.push({})},removeCookie:function(e){this.model.cookies=this.model.cookies.filter((function(t,l){return l!==e}))},selectGroup:function(e){e&&(this.latest=e,this.group=e,this.routes&&this.routes[e]?this.list=i(this.routes[e]):this.list=null)},removeGroup:function(){var e=this,t=this.latest;this.groups&&this.groups.includes(t)&&this.$confirm("Are you sure?",{confirmButtonText:"Yes",cancelButtonText:"No"}).then((function(){e.$store.dispatch("conf/deleteRouteGroup",t).then((function(t){e.group=null,e.fetchData(),e.$notify({title:"Success",message:t,type:"success",duration:2e3})}))})).catch((function(){e.group=t}))}}},c=n,u=(l("61ec"),l("2877")),d=Object(u["a"])(c,o,a,!1,null,null,null);t["default"]=d.exports}}]);